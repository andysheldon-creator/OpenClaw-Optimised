# ============================================================================
# OpenClaw-Optimised Environment Configuration
# ============================================================================
# Copy this file to .env and fill in your values:
#   cp .env.example .env
#
# Required vars are marked [REQUIRED]. Everything else has sensible defaults.
# ============================================================================


# ============================================================================
# REQUIRED - Core API Keys & Authentication
# ============================================================================

# Anthropic Claude API key [REQUIRED]
# Get yours at: https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=

# Telegram bot token from @BotFather [REQUIRED]
# Message @BotFather on Telegram to create a bot and get this token
TELEGRAM_BOT_TOKEN=

# Gateway password for the web UI [REQUIRED]
# Choose a strong, unique password
CLAWDIS_GATEWAY_PASSWORD=


# ============================================================================
# OLLAMA - Local LLM (Free Inference)
# ============================================================================
# Ollama provides free local LLM inference, reducing API costs by 40-50%.
# Install: curl -fsSL https://ollama.com/install.sh | sh
# Models: ollama pull llama3.2:3b && ollama pull nomic-embed-text

# Ollama server URL
OLLAMA_HOST=http://localhost:11434

# Chat model for local inference
OLLAMA_MODEL=llama3.2:3b

# Embedding model for RAG vector search
OLLAMA_EMBED_MODEL=nomic-embed-text

# Vision model for image analysis
OLLAMA_VISION_MODEL=llava:7b


# ============================================================================
# FEATURE FLAGS - Cost Optimisation Toggles
# ============================================================================
# All features default to true when Ollama is available.
# Set to "false" to explicitly disable a feature.

# Enable Ollama local LLM integration
ENABLE_OLLAMA=true

# Enable vector embeddings for semantic search
ENABLE_EMBEDDINGS=true

# Enable RAG (Retrieval Augmented Generation) for context retrieval
ENABLE_RAG=true

# Enable hybrid routing (local vs cloud LLM selection)
ENABLE_HYBRID_ROUTING=true

# Enable tiered memory system (SQLite FTS5)
ENABLE_MEMORY=true

# Enable conversation summarisation to reduce token usage
ENABLE_SUMMARIZATION=true

# Enable vision routing (local vs cloud image analysis)
ENABLE_VISION_ROUTING=true


# ============================================================================
# HYBRID ROUTING - Model Selection Strategy
# ============================================================================

# Routing mode: "aggressive" (max savings), "balanced" (default), "quality"
# - aggressive: routes more queries to free local models
# - balanced: smart cost/quality trade-off
# - quality: prefers Claude for most queries
HYBRID_ROUTING_MODE=balanced


# ============================================================================
# COST MANAGEMENT
# ============================================================================

# Daily cost budget in GBP (default: 2)
# Bot will warn when approaching this limit
COST_DAILY_LIMIT=2

# USD to GBP conversion rate for cost tracking (default: 0.79)
USD_TO_GBP_RATE=0.79


# ============================================================================
# RAG - Retrieval Augmented Generation Tuning
# ============================================================================

# Number of similar messages to retrieve per query (default: 10)
RAG_TOP_K=10

# Minimum cosine similarity score to include a result (default: 0.35)
RAG_MIN_SCORE=0.35

# Number of recent messages always included in context (default: 4)
RAG_RECENCY_WINDOW=4


# ============================================================================
# CONVERSATION SUMMARISATION
# ============================================================================

# Message count threshold before summarisation kicks in (default: 15)
SUMMARIZE_THRESHOLD=15

# Number of recent messages to keep in full (default: 6)
SUMMARIZE_KEEP_RECENT=6

# Batch size for summarisation processing (default: 8)
SUMMARIZE_BATCH_SIZE=8


# ============================================================================
# MEMORY SYSTEM
# ============================================================================

# Interval between memory reflection cycles in seconds (default: 86400 = 24h)
MEMORY_REFLECT_INTERVAL=86400


# ============================================================================
# VISION
# ============================================================================

# Maximum images processed per message (default: 3)
VISION_MAX_IMAGES=3


# ============================================================================
# GATEWAY & NETWORKING
# ============================================================================

# Gateway HTTP port (default: 18789)
CLAWDIS_GATEWAY_PORT=18789

# Gateway bind address (default: 0.0.0.0 for all interfaces)
# CLAWDIS_GATEWAY_BIND=0.0.0.0

# State directory for data persistence (default: ~/.clawdis)
# CLAWDIS_STATE_DIR=~/.clawdis


# ============================================================================
# OPTIONAL - Additional Platform Integrations
# ============================================================================
# Only configure these if you use these platforms.

# Discord bot token
# DISCORD_BOT_TOKEN=

# WhatsApp via Twilio
# TWILIO_ACCOUNT_SID=
# TWILIO_AUTH_TOKEN=
# TWILIO_WHATSAPP_FROM=

# OpenAI API key (alternative LLM provider)
# OPENAI_API_KEY=

# Google Gemini API key (alternative LLM provider)
# GEMINI_API_KEY=

# ElevenLabs API key (text-to-speech)
# ELEVENLABS_API_KEY=

# MiniMax API (alternative LLM provider)
# MINIMAX_API_KEY=
# MINIMAX_BASE_URL=https://api.minimax.io/v1
# MINIMAX_MODEL=minimax-m2.1
