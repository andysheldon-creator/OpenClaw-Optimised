# 2026-01-17

## Working Gateway Config

Fixed auth issues with web UI. Key points:

### Gateway Auth Setup
```json
{
  "gateway": {
    "port": 18789,
    "mode": "local",
    "bind": "lan",
    "auth": {
      "mode": "token",
      "token": "366d950c9d2365ea190b1d21e17e368f40eaafda2f91b208"
    },
    "tailscale": {
      "mode": "off",
      "resetOnExit": false
    }
  }
}
```

### Web UI Access
- URL: `http://127.0.0.1:18789/chat?token=366d950c9d2365ea190b1d21e17e368f40eaafda2f91b208`
- If "disconnected/unauthorized": try incognito window or hard refresh (Cmd+Shift+R)
- Browser can cache old state and not read token from URL

### Cron Jobs (Enabled)
- sync-skills (every 4h)
- archive-media (hourly)
- steve-email-check (hourly)
- daily-weather-steve (5:55 AM)
- daily-recap-posterboard (5 PM)
- daily-verse (6:05 AM)

### Merge Conflict Resolution
When upstream sync creates merge conflicts in source files:
1. Reset source files to upstream: `git checkout upstream/main -- src/...`
2. Manually merge AGENTS.md to keep both upstream additions AND local customizations
3. Rebuild: `pnpm install && pnpm build`
4. Restart daemon: `clawdbot daemon restart`

### Archive-Media Tracking
- State file: `~/.clawdbot/media/archived.log`
- Script: `/Users/steve/clawd/personal-scripts/archive-media.sh`
- Silent ack (no output) when no new files

## Sync Results
- Merged 30 upstream commits
- Added new personal scripts: crypto-alert-check.sh, etsy-sales-monitor.sh, otter-transcript-check.sh, vikunja-sync-twenty.py
