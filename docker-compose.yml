services:
  falkordb:
    image: falkordb/falkordb:latest
    container_name: falkordb
    ports:
      - "6379:6379"
    restart: always

  graphiti-mcp:
    image: zepai/knowledge-graph-mcp:latest
    container_name: graphiti-mcp
    depends_on:
      - falkordb
    ports:
      - "8001:8000"
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - GRAPHITI_DB_URL=falkordb://falkordb:6379
    volumes:
      - ./graphiti-config.yaml:/app/config.yaml
    # The official image usually handles the entrypoint, but we'll specify config
    command: [ "--config", "/app/config.yaml" ]
    restart: always

volumes:
  zep-db-data:
