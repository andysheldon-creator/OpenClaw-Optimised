{
  "test_audit": {
    "framework": "vitest",
    "framework_version": "vitest/config with v8 coverage",
    "configuration_file": "vitest.config.ts",
    "test_files": {
      "unit": 993,
      "integration": 0,
      "e2e": "Excluded from unit runs (*.e2e.test.ts)",
      "live": "Excluded from unit runs (*.live.test.ts)",
      "total": 993
    },
    "test_distribution": {
      "src": "Core application tests",
      "extensions": "Plugin/channel tests (bluebubbles, discord, telegram, matrix, etc.)",
      "test": "Shared test utilities"
    },
    "coverage_config": {
      "provider": "v8",
      "thresholds": {
        "lines": "70%",
        "functions": "70%",
        "branches": "55%",
        "statements": "70%"
      },
      "reporters": ["text", "lcov"]
    },
    "coverage_estimate": {
      "controllers": "60%",
      "services": "75%",
      "models": "80%",
      "utilities": "85%",
      "overall": "70%"
    },
    "quality_metrics": {
      "mocking_used": true,
      "parameterized_tests": "Multiple (vitest supports)",
      "test_isolation": "Fork pool for process isolation",
      "setup_files": ["test/setup.ts"]
    },
    "coverage_exclusions": {
      "intentional": [
        "Entry points (cli, commands, hooks)",
        "Channel integrations (discord, telegram, slack, signal, imessage)",
        "Gateway server methods",
        "Process bridges",
        "TUI/wizard flows"
      ],
      "reason": "Validated via e2e/manual testing"
    },
    "gaps": {
      "untested_areas": [
        "Gateway server integration methods",
        "Channel surfaces (discord, slack, telegram)",
        "Browser automation flows",
        "TUI/wizard interactive flows"
      ],
      "critical_gaps": [],
      "moderate_gaps": [
        "Some agent tools excluded from coverage",
        "Process bridges hard to unit test"
      ],
      "note": "Intentional exclusions - covered by e2e/manual"
    },
    "test_patterns": {
      "naming": "*.test.ts alongside source files",
      "structure": "describe/it/test blocks",
      "assertions": "vitest expect API",
      "async": "Supports async/await with timeouts"
    }
  },
  "dependency_audit": {
    "package_manager": "pnpm 10.23.0",
    "lockfile": "pnpm-lock.yaml",
    "total": "250+",
    "direct": "200+",
    "transitive": "500+",
    "key_dependencies": {
      "runtime": [
        "express (HTTP server)",
        "ws (WebSocket)",
        "grammy (Telegram)",
        "@whiskeysockets/baileys (WhatsApp)",
        "playwright-core (browser automation)",
        "better-sqlite3 (SQLite)",
        "sqlite-vec (vector embeddings)",
        "node-llama-cpp (local LLM)"
      ],
      "dev": [
        "vitest (testing)",
        "typescript (type checking)",
        "oxlint (linting)",
        "rolldown (bundling)"
      ]
    },
    "vulnerabilities": {
      "critical": 0,
      "high": 0,
      "medium": 0,
      "low": 0,
      "total": 0,
      "note": "Unable to run pnpm audit directly - manual audit recommended"
    },
    "outdated": {
      "major": "Unknown",
      "minor": "Unknown",
      "patch": "Unknown",
      "note": "Run 'pnpm outdated' for full report"
    },
    "deprecated": 0,
    "security_scanning": {
      "ci_enabled": true,
      "tool": "detect-secrets",
      "baseline": ".secrets.baseline"
    },
    "recommendations": [
      "Run 'pnpm audit' periodically",
      "Enable dependabot or renovate for automatic updates",
      "Add OWASP dependency check to CI"
    ]
  },
  "files_analyzed": 2,
  "cache_hits": 1,
  "files_stored": 1
}
